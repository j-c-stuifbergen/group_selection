<!DOCTYPE html>
<html>
<body>

<h2>JavaScript Arrays</h2>

<p id="text_out">hoi</p>
<script src="./js/groupSelection.js"></script>
<!script src="./js/groupSelection_new.js"></script>
<script>

let displayText = ""
// nPlaces = 80;
// groupSizes =[1,2,3,4,5,7,12]
// nGroups = [60,21,4,3,2,1,1]
// groupSizes =[1,2,3,4,5,7,12,20,50]
// nGroups = [50,15,6,3,2,1,1,2,1]
nPlaces = 6;
groupSizes =[1,2,3]
nGroups = [3,2,1]
nIterations =150
//nIndividuals = 40;
n40 = 1;
n50 = 1;

// create possible combinations
optimizer = new groups(nPlaces,groupSizes,nGroups)

optimizer.setCombinations()
optimizer.selectAllCombinations()
console.log("combinations")

displayText += "chance should be "+nPlaces+" / "+optimizer.nCandidates+" = "+optimizer.pAim +"<br>";

for (let i=0; i<10 && i<optimizer.selection.length; i++)
{
	displayText += htmlFromArray(optimizer.combinations[i]) + "<br>"
	displayText += optimizer.calculationString(i) + "<br>"
}
document.getElementById("text_out").innerHTML = displayText;
let comb = optimizer.showCombinations(optimizer.selection,"\r\n")
console.log(comb["combinations"])
console.log(comb["calculations"])

optimizer.initialProbabilities()
p = optimizer.improveProbabilities(nIterations)

displayText += "iteration = "+nIterations +"<br>";
// displayText += "p = "+p +"<br>";
displayText += "number of combinations : "+ p.length+"<br> "
displayText += "individual chances :<br> "
var pRelative = optimizer.pIndividuals(p,true)
for (let i =0; i<pRelative.length; i++)
{
	displayText += i+": "+nGroups[i]+" groups of size "+groupSizes[i]+" deviate from the average by "+pRelative[i]+"<br>"
}
displayText += "<br> individual chance should be "+optimizer.pAim

displayText +="<br>ready<br>";


document.getElementById("text_out").innerHTML = displayText;

</script>


</body>
</html>



